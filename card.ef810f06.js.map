{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-6def06254238d311.js","src/card.js","node_modules/@parcel/runtime-js/lib/runtime-17aa9e0737053d2e.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"g0UFJ\\\":\\\"card.ef810f06.js\\\",\\\"dFIUU\\\":\\\"giphy.356b0fc8.gif\\\",\\\"5yVf2\\\":\\\"card.8e572b69.js\\\"}\"));","/* eslint-disable linebreak-style */\r\nimport Stone from 'stonejs'\r\nimport * as Sharer from 'sharer.js'\r\nimport * as Stretchy from 'stretchy'\r\nimport { SocialLinks, TYPE_MOBILE } from 'social-links'\r\nimport { XORCipher } from './libs/XORCipher'\r\nimport { stoneJsCatalogs } from './libs/stoneJSCatalog'\r\nimport { wrap, __envPath, __generateSvg, __isMobile, __reverse, __supportedSocials } from './helpers'\r\nimport { library, dom, config } from '@fortawesome/fontawesome-svg-core'\r\nconfig.searchPseudoElements = true\r\nimport { faFacebook, faInstagram, faSnapchat, faMastodon, faTwitter, faYoutube, faTelegram, faSkype, faVk, faWhatsapp } from '@fortawesome/free-brands-svg-icons'\r\nimport { faEnvelope, faUser, faPhone, faKey } from '@fortawesome/free-solid-svg-icons'\r\nimport { join } from './sync'\r\nlibrary.add(faFacebook, faInstagram, faSnapchat, faMastodon, faTwitter, faYoutube, faTelegram, faSkype, faVk, faWhatsapp, faEnvelope, faUser, faPhone, faKey)\r\ndom.i2svg()\r\ndom.watch()\r\n\r\nwindow.Sharer = Sharer\r\n\r\nStretchy.selectors.filter = '.stretchy'\r\nStretchy.init(document.querySelector('.form1'))\r\n\r\nconst giphy = new URL(\r\n    './assets/giphy.gif',\r\n    import.meta.url\r\n)\r\nconst form = document.querySelector('.form1')\r\nlet order = '0'.repeat(__supportedSocials.length)\r\nlet bogus = false\r\nlet dataArray = []\r\nlet socialArray, values\r\n///////////////////////////////////////////////////////////////////////  INIT  //////////////////////////////////////////////////////////////\r\n// get part after card.html in link\r\nlet pageName = __envPath.split('card.html')[1] || __envPath.split('card')[1]\r\nlet isSyncOn_ = pageName.charAt(pageName.length-1) === '0' ? false : true\r\npageName = pageName.slice(0, -1)\r\nconst hash = pageName.slice(1).hashCode()\r\nlet reversed = __reverse(pageName, order)\r\nvalues = reversed[0]\r\norder = reversed[1]\r\nbogus = (typeof (values) === 'undefined' || values.length === 1)\r\nconst socialLinks = new SocialLinks()\r\nfunction createDataArray() {\r\n    // fixed fields\r\n    let keys = ['user', ...__supportedSocials, 'envelope', 'phone']\r\n    dataArray = []\r\n    for (let i = 0; i < keys.length; i++) {\r\n        const key = keys[i]\r\n        const value = values[i]\r\n        if (key == 'user') {\r\n            dataArray.push([0, key, value])\r\n        } else if (key == 'envelope') {\r\n            dataArray.push([keys.length - 2, key, value])\r\n        } else if (key == 'phone') {\r\n            dataArray.push([keys.length - 1, key, value])\r\n        } else {\r\n            let socialOrder = parseInt(order[i - 1])\r\n            dataArray.push([socialOrder, key, values[socialOrder]])\r\n        }\r\n    }\r\n    // dynamic fields\r\n    for (let j = keys.length; j < values.length; j++) {\r\n        dataArray.push([keys.length, -1, values[j]])\r\n    }\r\n    dataArray.sort()\r\n}\r\ncreateDataArray()\r\n\r\n///////////////////////////////////////////////////////////////////////  EVENTS CALLBACKS  ///////////////////////////////////////////////////////////\r\nfunction langChange(el) {// check for right to left formatting\r\n    if (el.value === 'ar') { document.dir = 'rtl' } else { document.dir = 'ltr' }\r\n    Stone.setLocale(el.value)\r\n}\r\nwindow.addEventListener('DOMContentLoaded', () => {\r\n    let langOptions = Array.from(document.querySelector('#lang-select').options)\r\n    let defaultLang = langOptions.filter(option => option.defaultSelected == true)[0]\r\n    // Language selector.\r\n    langChange(defaultLang)\r\n})\r\ndocument.getElementById('lang-select').addEventListener('change', function () {\r\n    langChange(this)\r\n}, false)\r\n// Decrypt button event listener\r\nconst btn = document.getElementById('decrypt-button')\r\nbtn.addEventListener('click', function () {\r\n    let password = prompt('This social card seems encrypted. Enter in the key!') || ''\r\n    if (password.length < 4 || password.length > 8) {\r\n        bugIfABugs(true)\r\n    } else {\r\n        for (socialArray of dataArray) {\r\n            if (socialArray[2]) {\r\n                socialArray[2] = XORCipher.decode(password, socialArray[2])\r\n            }\r\n        }\r\n        document.getElementsByClassName('form1')[0].innerHTML = ''\r\n        renderSubmittedData(dataArray)\r\n    }\r\n})\r\n\r\nlet submittedSocials = 0\r\nfunction renderSubmittedData(dataArray) {\r\n    for (socialArray of dataArray) {\r\n        let key = socialArray[1]\r\n        let value = socialArray[2]\r\n        let link\r\n        if (value != '') {\r\n            if (socialLinks.isValid(key, value)) {\r\n                link = socialLinks.getLink(key, value)\r\n            }\r\n            submittedSocials += 1\r\n            if (key === 'envelope') {\r\n                form.insertAdjacentHTML('beforeend', `<div id=\"mail-id\"><a href=\"mailto:${value}\">${value}</a></div>`)\r\n                continue\r\n            } else if (key === 'phone') {\r\n                form.insertAdjacentHTML('beforeend', `<div id=\"phone-id\"><a href=\"tel:${value}\">${value}</a></div>`)\r\n                continue\r\n            } else if (key === 'user') {\r\n                document.querySelectorAll('.user').forEach(node => { node.innerHTML = value })\r\n            }\r\n            let x = document.createElement('I')\r\n            if (__supportedSocials.indexOf(key) >= 0)\r\n                x.setAttribute('class', `fa-brands fa-${key} icon`)\r\n            else\r\n                x.setAttribute('class', `fa fa-${key} icon`)\r\n\r\n            form.appendChild(x)\r\n            let y = document.createElement('INPUT')\r\n            y.setAttribute('name', key)\r\n            y.setAttribute('class', 'input-field stretchy')\r\n            y.setAttribute('value', value)\r\n            y.setAttribute('type', 'text')\r\n            y.setAttribute('readonly', 'readonly')\r\n            form.appendChild(y)\r\n\r\n            if (link) {\r\n                y.style = 'cursor: pointer;'\r\n                const link_ = document.createElement('a')\r\n                link_.style = 'display: contents;'\r\n                link_.setAttribute('href', link)\r\n                wrap(y, link_)\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction bugIfABugs(bogus) {\r\n    if (!bogus) return\r\n    // rollback\r\n    form.innerHTML = ''\r\n    let img = document.createElement('img')\r\n    img.src = giphy\r\n    form.appendChild(img)\r\n    let errorMsg = document.createElement('h2')\r\n    errorMsg.innerText = 'QR code or URL is probably wrong'\r\n    form.appendChild(errorMsg)\r\n}\r\nbugIfABugs(bogus)\r\nif (!bogus) {\r\n    renderSubmittedData(dataArray)\r\n    // Values over 7 result in svg images too large for the card\r\n    submittedSocials = submittedSocials > 7 ? 7 : submittedSocials\r\n    // Generate some art\r\n    // TODO: generated SVG position to fix\r\n    if (!__isMobile()) form.insertAdjacentHTML('afterend', __generateSvg(submittedSocials))\r\n    join(false, hash, isSyncOn_)\r\n}\r\n\r\ndocument.body.hidden = false\r\nStone.enableDomScan(true)\r\nStone.addCatalogs(stoneJsCatalogs)\r\n\r\n// let _id;\r\n// let mcastUrl;\r\n// $.ajaxSetup({ xhrFields: { withCredentials: true } });\t// For cookies with SeqId\r\n// $.post(mcastUrl, \"holla\");\r\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"dFIUU\")).toString();"],"names":["parcelRequire","register","JSON","parse","$1j0wn","$4wCtj","config","searchPseudoElements","library","add","$io3Hd","faFacebook","faInstagram","faSnapchat","faMastodon","faTwitter","faYoutube","faTelegram","faSkype","faVk","faWhatsapp","$cAhzP","faEnvelope","faUser","faPhone","faKey","dom","i2svg","watch","window","Sharer","$4Crae","$gl8ib","selectors","filter","init","document","querySelector","$b08de915e7f95cf8$exports","URL","resolve","import","meta","url","toString","$bf8f70694161f362$var$giphy","$bf8f70694161f362$var$form","$bf8f70694161f362$var$socialArray","$bf8f70694161f362$var$values","$bf8f70694161f362$var$order","repeat","$gJuA9","__supportedSocials","length","$bf8f70694161f362$var$bogus","$bf8f70694161f362$var$dataArray","$bf8f70694161f362$var$pageName","__envPath","split","$bf8f70694161f362$var$isSyncOn_","charAt","slice","$bf8f70694161f362$var$hash","hashCode","$bf8f70694161f362$var$reversed","__reverse","$bf8f70694161f362$var$socialLinks","$3WQbN","SocialLinks","$bf8f70694161f362$var$langChange","el","value","dir","$parcel$interopDefault","setLocale","keys","i","key","push","socialOrder","parseInt","j","sort","$bf8f70694161f362$var$createDataArray","addEventListener","Array","from","options","option","defaultSelected","getElementById","this","password","prompt","$bf8f70694161f362$var$bugIfABugs","$8ggA7","XORCipher","decode","getElementsByClassName","innerHTML","$bf8f70694161f362$var$renderSubmittedData","$bf8f70694161f362$var$submittedSocials","dataArray","link","isValid","getLink","insertAdjacentHTML","querySelectorAll","forEach","node","x","createElement","indexOf","setAttribute","appendChild","y","style","link_","wrap","bogus","img","src","errorMsg","innerText","__isMobile","__generateSvg","$3utQD","join","body","hidden","enableDomScan","addCatalogs","$1dkYF","stoneJsCatalogs"],"version":3,"file":"card.ef810f06.js.map"}